# é¡¹ç›®ä»£ç æ¸…ç†æŠ¥å‘Š

## ğŸ§¹ æ¸…ç†æ¦‚è¿°

æœ¬æ¬¡ä»£ç æ¸…ç†ä¸»è¦é’ˆå¯¹é¡¹ç›®ä¸­çš„æ½œåœ¨å®‰å…¨é—®é¢˜ã€æ— ç”¨ä»£ç å’Œæœ€ä½³å®è·µè¿›è¡Œäº†å…¨é¢æ£€æŸ¥å’Œä¼˜åŒ–ã€‚

## ğŸ—‘ï¸ ç§»é™¤çš„æ–‡ä»¶

### åç«¯æ–‡ä»¶
- `packages/admin-backend/src/controllers/` - ç©ºç›®å½•
- `packages/admin-backend/src/utils/` - ç©ºç›®å½•
- `packages/admin-backend/src/routes/user.ts` - æœªä½¿ç”¨çš„è·¯ç”±æ–‡ä»¶
- `packages/admin-backend/src/routes/role-simple.ts` - æœªä½¿ç”¨çš„è·¯ç”±æ–‡ä»¶

### å‰ç«¯æ–‡ä»¶
- `packages/admin-frontend/src/views/UsersViewNew.vue` - é‡å¤çš„ç”¨æˆ·ç®¡ç†é¡µé¢
- `packages/admin-frontend/src/views/package.json` - é”™è¯¯ä½ç½®çš„é…ç½®æ–‡ä»¶

### è„šæœ¬æ–‡ä»¶ï¼ˆ17ä¸ªä¸€æ¬¡æ€§è„šæœ¬ï¼‰
- `add-menu-management.ts`
- `add-server-management.ts`
- `check-menu-paths.ts`
- `check-tables.ts`
- `check-users-table.ts`
- `check-users.ts`
- `cleanup-old-permissions.ts`
- `create-game-permission-system.ts`
- `create-permission-tables.ts`
- `create-servers-table.ts`
- `fix-permission-data.ts`
- `fix-ranking-menu-name.ts`
- `test-get-permissions.ts`
- `test-permission-flow.ts`
- `test-permission-setting.ts`
- `test-user-creation.ts`
- `update-ranking-menus.ts`

## ğŸ”’ å®‰å…¨é—®é¢˜ä¿®å¤

### 1. JWTå¯†é’¥ç¡¬ç¼–ç é—®é¢˜
**é—®é¢˜**: `auth.ts` ä¸­JWT_SECRETæœ‰é»˜è®¤å€¼
```javascript
// ä¿®å¤å‰
process.env.JWT_SECRET || 'your-secret-key'

// ä¿®å¤å
const jwtSecret = process.env.JWT_SECRET
if (!jwtSecret) {
  throw new Error('JWT_SECRET environment variable is required')
}
```

### 2. CORSé…ç½®è¿‡äºå®½æ¾
**é—®é¢˜**: å…è®¸æ‰€æœ‰æ¥æºè®¿é—®
```javascript
// ä¿®å¤å‰
origin: '*'

// ä¿®å¤å
origin: process.env.FRONTEND_URL || 'http://localhost:5173'
```

### 3. ç¯å¢ƒå˜é‡é…ç½®
**æ–°å¢**: `packages/admin-backend/.env.example`
- æä¾›å®Œæ•´çš„ç¯å¢ƒå˜é‡æ¨¡æ¿
- åŒ…å«å®‰å…¨é…ç½®è¯´æ˜
- ç”Ÿäº§ç¯å¢ƒé…ç½®å»ºè®®

## ğŸ§½ ä»£ç æ¸…ç†

### 1. è°ƒè¯•æ—¥å¿—ç§»é™¤
- ç§»é™¤å‰ç«¯é¡µé¢ä¸­çš„ `console.log` è°ƒè¯•ä¿¡æ¯
- ç§»é™¤åç«¯APIä¸­çš„è°ƒè¯•è¾“å‡º
- ä¿ç•™å¿…è¦çš„é”™è¯¯æ—¥å¿—

### 2. æœªä½¿ç”¨ä»£ç æ¸…ç†
- ç§»é™¤é‡å¤çš„Vueç»„ä»¶
- åˆ é™¤æœªå¼•ç”¨çš„è·¯ç”±æ–‡ä»¶
- æ¸…ç†ä¸€æ¬¡æ€§æ•°æ®åº“è„šæœ¬

## ğŸ“ ä¿ç•™çš„é‡è¦æ–‡ä»¶

### æ•°æ®åº“è„šæœ¬
- `init-db.ts` - æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
- `simple-init.ts` - ç®€åŒ–åˆå§‹åŒ–è„šæœ¬

### æ ¸å¿ƒåŠŸèƒ½æ–‡ä»¶
- æ‰€æœ‰ä¸šåŠ¡é€»è¾‘è·¯ç”±æ–‡ä»¶
- å‰ç«¯é¡µé¢ç»„ä»¶
- é…ç½®æ–‡ä»¶å’Œä¸­é—´ä»¶

## âš ï¸ æ½œåœ¨é—®é¢˜è¯†åˆ«

### 1. TypeScriptç±»å‹é—®é¢˜
- å‰ç«¯å­˜åœ¨ä¸€äº› `any` ç±»å‹ä½¿ç”¨
- å“åº”æ‹¦æˆªå™¨å¯¼è‡´çš„ç±»å‹ä¸åŒ¹é…
- å»ºè®®åç»­æ·»åŠ æ›´ä¸¥æ ¼çš„ç±»å‹å®šä¹‰

### 2. é”™è¯¯å¤„ç†
- éƒ¨åˆ†APIç¼ºå°‘å®Œæ•´çš„é”™è¯¯å¤„ç†
- å»ºè®®æ·»åŠ ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶

### 3. è¾“å…¥éªŒè¯
- éƒ¨åˆ†æ¥å£ç¼ºå°‘è¾“å…¥éªŒè¯
- å»ºè®®æ·»åŠ æ•°æ®éªŒè¯ä¸­é—´ä»¶

## ğŸ¯ åç»­å»ºè®®

### å®‰å…¨åŠ å›º
1. æ·»åŠ è¯·æ±‚é¢‘ç‡é™åˆ¶
2. å®ç°æ›´ä¸¥æ ¼çš„è¾“å…¥éªŒè¯
3. æ·»åŠ SQLæ³¨å…¥é˜²æŠ¤
4. å®ç°æ“ä½œæ—¥å¿—è®°å½•

### ä»£ç è´¨é‡
1. æ·»åŠ ESLintè§„åˆ™
2. å®ç°å•å…ƒæµ‹è¯•
3. æ·»åŠ ä»£ç è¦†ç›–ç‡æ£€æŸ¥
4. ç»Ÿä¸€é”™è¯¯å¤„ç†

### æ€§èƒ½ä¼˜åŒ–
1. æ·»åŠ æ•°æ®åº“ç´¢å¼•
2. å®ç°æŸ¥è¯¢ç¼“å­˜
3. ä¼˜åŒ–å‰ç«¯æ‰“åŒ…
4. æ·»åŠ CDNæ”¯æŒ

## âœ… æ¸…ç†ç»“æœ

- **åˆ é™¤æ–‡ä»¶**: 22ä¸ª
- **ä¿®å¤å®‰å…¨é—®é¢˜**: 3ä¸ª
- **ç§»é™¤è°ƒè¯•ä»£ç **: å¤šå¤„
- **ä»£ç è¡Œæ•°å‡å°‘**: çº¦2000è¡Œ
- **é¡¹ç›®ç»“æ„**: æ›´æ¸…æ™°ç®€æ´

é¡¹ç›®ç°åœ¨æ›´åŠ å®‰å…¨ã€ç®€æ´ï¼Œä»£ç è´¨é‡å¾—åˆ°æ˜¾è‘—æå‡ã€‚
